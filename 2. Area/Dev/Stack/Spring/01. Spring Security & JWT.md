
 2024-06-04

``` java
package com.youngseoplee.yggdrasil_ai.config;  
  
import com.youngseoplee.yggdrasil_ai.security.authentication.LoginFailureH;  
import com.youngseoplee.yggdrasil_ai.security.authentication.LoginSuccessH;  
import org.springframework.context.annotation.Bean;  
import org.springframework.context.annotation.Configuration;  
import org.springframework.security.config.annotation.web.builders.HttpSecurity;  
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;  
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;  
import org.springframework.security.crypto.password.PasswordEncoder;  
import org.springframework.security.web.SecurityFilterChain;  
import org.springframework.security.web.util.matcher.AntPathRequestMatcher;  
  
@Configuration 
@EnableWebSecurity 
public class WebSecurityConfig {  
  
    @Bean  
    public LoginSuccessH successHandler() {  
        return new LoginSuccessH();  
    }  
  
    @Bean  
    public LoginFailureH failureHandler() {  
        return new LoginFailureH();  
    }  
  
    @Bean  
    public PasswordEncoder passwordEncoder() {  
        return new BCryptPasswordEncoder();  
    }  
  
    @Bean  
    public SecurityFilterChain filterChain(HttpSecurity https) throws Exception {  
        return https  
                .csrf().disable().authorizeRequests()  
                .antMatchers("/user/**").authenticated()  
                .antMatchers("/admin/**").access("hasRole('ROLE_ADMIN')")  
                .antMatchers("/home").permitAll()  
                .anyRequest()  
                .permitAll()  
                .and()  
                .formLogin()  
                .loginPage("/login")  
                .usernameParameter("email")  
                .passwordParameter("password")  
                .loginProcessingUrl("/loginProc")  
                .successHandler(successHandler())  
                .failureHandler(failureHandler())  
                .and()  
                .logout()  
                .logoutRequestMatcher(new AntPathRequestMatcher("/logout"))  
                .logoutSuccessUrl("/")  
                .invalidateHttpSession(true)  
                .permitAll()  
                .and()  
                .build();  
    }  
  
}
```





#java #spring #springSecurity 